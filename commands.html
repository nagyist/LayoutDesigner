<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20111117" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>How client and server interact- (All about client/server commands)</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="commands_files/commands.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='commands_files/commandsIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="commands_files/commands.js"></script>
  </head>
  <body style="background: rgb(255, 255, 255); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 35px; margin-top: 0px; opacity: 1.00; position: relative; width: 630px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: Arial, sans-serif;\n\tfont-size: 1em;\n\tcolor: #666;\n\tmargin: 9px 0px 6px 0px;\n\tline-height: 30px;\n}\n\n.navbar-bg {\n\ttext-align: center;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:hover\r{\r\n \tcolor: #463C3C;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #463C3C;\n\ttext-decoration: none;\n\tfont-weight: bold;\r\r}\n", "current-page-GUID": "874D07BC-F5AB-4897-86E8-C7C7EF4E91FA", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 90px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; width: 630px;  height: 1px; left: 35px; position: absolute; top: 3px; width: 630px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 630px; ">
              <img src="commands_files/shapeimage_1.jpg" alt="" style="height: 1px; left: 0px; position: absolute; top: 0px; width: 630px; " />
            </div>
          </div>
          


          <div id="id1" style="height: 68px; left: 44px; position: absolute; top: 22px; width: 630px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content style_External_630_68" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">How client and server interact- (All about client/server commands)</p>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id2" style="height: 1375px; left: 0px; position: absolute; top: 33px; width: 700px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_700_1375" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_1">Client and server interact through commands. All supported commands are declared in LDConstants.h. The commands that start with &quot;Client&quot; are the ones that are handled by Client and commands starting with &quot;Server&quot; are the ones that server can handle.<br /></p>
                <p class="paragraph_style_2">What are commands<br /></p>
                <p class="paragraph_style_1">Commands are nothing but unique strings. When a command is received in client or sever, it is used as a key to search for a handler in LDCommandMap (see <span class="style_1">LDCommandHandler</span><span class="style_2"> and </span><span class="style_1">LDCommandMap</span><span class="style_2">).<br /></span></p>
                <p class="paragraph_style_3">How Commands are sent<br /></p>
                <p class="paragraph_style_4">Commands are sent as packets (See Network Packets). Packets are NSDictionaries that have required data. Set the unique command string as value for the key &quot;NetworkPacketKeyCommand&quot; (See LDCommands.h for all keys).  Add any additional data that might be required for the command execution and broadcast the packet using LDHost sharedInstance (in LDServer) or LDCLient sharedInstance(in LDCLient).<br /></p>
                <p class="paragraph_style_4">When a command is received (say by LDClient from LDServer) then the client looks into it's default LDCommandMap instance if a handler was added for this command. If the handler is found the handler is sent the command string along with any commandInfo saved with the LDCommandMap for this command and also the network packet (dictionary) received. The handler then has the logic implemented to execute or perform action that is required.<br /></p>
                <p class="paragraph_style_3">How to Add new Commands<br /></p>
                <p class="paragraph_style_5">Multiple ways of doing this<br /></p>
                <p class="paragraph_style_6">Edit the library code:-<span class="style_3"><br /></span></p>
                <p class="paragraph_style_4">1. Add a unique string for this command in LDConstants.h<br /></p>
                <p class="paragraph_style_4">2. In the LDDefaultHandler add a method to handle this command.<br /></p>
                <p class="paragraph_style_4">3. From LDCLient.m &quot;initializeAndStart&quot; method or (setupServerApplication method in LDServerAppDelegate) add defaultHandler sharedInstance as the handler in LDCommandMap. Provide the method name in the commandInfo as well.<br /></p>
                <p class="paragraph_style_4"><span class="style_4">Create an Extension Or add from the application<br /></span><br />You can also add a separate handler at run time into the LDCommandMap. Create a class with a method that is to be executed for this command and add it's instance in the map for the specific command string. The other application has to send the unique command string for this method to execute. You can create extension by subclassing any of the classes (say LDCLient or LDHost) and adding more initialization to it.<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_3">How Properties work<br /></p>
                <p class="paragraph_style_4">A map of supported properties (properties that can be changed from server) is initialized at the beginning. More properties can be added any time by simply creating a LDProperty instance and adding it in the LDPropertyMap for a class as key. These properties will start appearing immediately on the LDServer (when a view of that class is selected).<br /></p>
                <p class="paragraph_style_4">When an LDView is created and it's view (UIView property) is set, it uses the map to find all supported properties for itself and add's them to it's messages and properties array. This array is used on LDServer for displaying properties for modification.<br /></p>
                <p class="paragraph_style_5">How to Add more supported properties or properties for my custom class<br /></p>
                <p class="paragraph_style_4">Checkout LDCLient.m<br />+(void)addDefaultClassesAndProperties<br />{<br />//add default supported classes<br />[defaultPropertyMap addSupportedClass:[UIView class]];<br />[defaultPropertyMap addSupportedClass:[UILabel class]];<br />[defaultPropertyMap addSupportedClass:[UIImageView class]];<br />//for each default added class add a method for creating default properties<br />//here we iterate over each supported class (default) for getting their default properties<br />for(Class type in [defaultPropertyMap supportedClasses])<br />{<br />NSString *selectorString = [NSString stringWithFormat:@&quot;propertiesFor%@&quot;,type];<br />SEL selector = NSSelectorFromString(selectorString);<br />if ([defaultPropertyMap respondsToSelector:selector]) {<br />NSArray *propertiesForType = [defaultPropertyMap performSelector:selector];<br />for(LDProperty* property in propertiesForType)<br />[defaultPropertyMap addProperty:property forClass:type];<br />}<br />else<br />{<br />NSLog(@&quot;%@ method not found! Implement and return property list&quot;,selectorString);<br />}<br />}<br />}<br /></p>
                <p class="paragraph_style_4">Any new class can be added in supported classes and new properties can be added then in the map.<br /></p>
              </div>
            </div>
          </div>
          <div style="height: 1408px; line-height: 1408px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
      </div>
    </div>
  </body>
</html>


